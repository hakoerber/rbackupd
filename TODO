clean thread exiting on error
